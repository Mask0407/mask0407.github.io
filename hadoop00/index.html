<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>Hadoop 伪分布式搭建(超详细) | 个人博客</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.0/css/all.min.css">
<link rel="shortcut icon" href="https://mask0407.github.io/favicon.ico?v=1593400910740">
<link rel="stylesheet" href="https://mask0407.github.io/styles/main.css">





<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="

虚拟机准备阶段操作

安全设置

防火墙相关指令
关闭关闭selinux


IP设置

查看机器IP
修改主机名
修改IP及主机名映射


SSH免密登陆


Hadoop伪分布式搭建

JDK配置

解压
配置环境变量


Hado..." />
    <meta name="keywords" content="Hadoop,大数据" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://mask0407.github.io">
        <img src="https://mask0407.github.io/images/avatar.png?v=1593400910740" class="site-logo">
        <h1 class="site-title">个人博客</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            归档
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            关于
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      温故而知新
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://mask0407.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">Hadoop 伪分布式搭建(超详细)</h2>
            <div class="post-date">2020-06-29</div>
            
            <div class="post-content" v-pre>
              <!-- more -->
<p><ul class="markdownIt-TOC">
<li><a href="#%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%87%86%E5%A4%87%E9%98%B6%E6%AE%B5%E6%93%8D%E4%BD%9C">虚拟机准备阶段操作</a>
<ul>
<li><a href="#%E5%AE%89%E5%85%A8%E8%AE%BE%E7%BD%AE">安全设置</a>
<ul>
<li><a href="#%E9%98%B2%E7%81%AB%E5%A2%99%E7%9B%B8%E5%85%B3%E6%8C%87%E4%BB%A4">防火墙相关指令</a></li>
<li><a href="#%E5%85%B3%E9%97%AD%E5%85%B3%E9%97%ADselinux">关闭关闭selinux</a></li>
</ul>
</li>
<li><a href="#ip%E8%AE%BE%E7%BD%AE">IP设置</a>
<ul>
<li><a href="#%E6%9F%A5%E7%9C%8B%E6%9C%BA%E5%99%A8ip">查看机器IP</a></li>
<li><a href="#%E4%BF%AE%E6%94%B9%E4%B8%BB%E6%9C%BA%E5%90%8D">修改主机名</a></li>
<li><a href="#%E4%BF%AE%E6%94%B9ip%E5%8F%8A%E4%B8%BB%E6%9C%BA%E5%90%8D%E6%98%A0%E5%B0%84">修改IP及主机名映射</a></li>
</ul>
</li>
<li><a href="#ssh%E5%85%8D%E5%AF%86%E7%99%BB%E9%99%86">SSH免密登陆</a></li>
</ul>
</li>
<li><a href="#hadoop%E4%BC%AA%E5%88%86%E5%B8%83%E5%BC%8F%E6%90%AD%E5%BB%BA">Hadoop伪分布式搭建</a>
<ul>
<li><a href="#jdk%E9%85%8D%E7%BD%AE">JDK配置</a>
<ul>
<li><a href="#%E8%A7%A3%E5%8E%8B">解压</a></li>
<li><a href="#%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">配置环境变量</a></li>
</ul>
</li>
<li><a href="#hadoop%E9%85%8D%E7%BD%AE">Hadoop配置</a>
<ul>
<li><a href="#%E8%A7%A3%E5%8E%8B%E6%96%87%E4%BB%B6">解压文件</a></li>
<li><a href="#%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">修改配置文件</a></li>
<li><a href="#%E9%85%8D%E7%BD%AEhadoop%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">配置Hadoop环境变量</a></li>
<li><a href="#%E9%AA%8C%E8%AF%81%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E6%98%AF%E5%90%A6%E9%85%8D%E7%BD%AE%E6%88%90%E5%8A%9F">验证环境变量是否配置成功</a></li>
<li><a href="#%E6%A0%BC%E5%BC%8F%E5%8C%96namenode">格式化NameNode</a></li>
<li><a href="#hadoop%E8%B5%B7%E5%81%9C%E5%91%BD%E4%BB%A4">Hadoop起停命令</a></li>
<li><a href="#%E6%9F%A5%E7%9C%8Bwebui%E7%95%8C%E9%9D%A2">查看WebUI界面</a></li>
</ul>
</li>
</ul>
</li>
</ul>
(Hadoop伪分布式搭建)</p>
<h1 id="虚拟机准备阶段操作">虚拟机准备阶段操作</h1>
<p>本文是基于CentOS 7 系统搭建<br>
相关资源下载<br>
链接:<a href="https://pan.baidu.com/s/1FW228OfyURxEgnXW0qqpmA">https://pan.baidu.com/s/1FW228OfyURxEgnXW0qqpmA</a>  密码:18uc</p>
<h2 id="安全设置">安全设置</h2>
<h3 id="防火墙相关指令">防火墙相关指令</h3>
<pre><code class="language-shell"># 查看防火墙状态
firewall-cmd --state

# 停止防火墙
[root@localhost ~]# systemctl stop firewalld.service

# 禁止防火墙开机自启
[root@localhost ~]# systemctl disable firewalld.service 
</code></pre>
<h3 id="关闭关闭selinux">关闭关闭selinux</h3>
<pre><code class="language-shell">[root@localhost ~]# vi /etc/selinux/config
</code></pre>
<p>将 <code>SELINUX=enforcing</code>改为 <code>SELINUX=disabled</code></p>
<h2 id="ip设置">IP设置</h2>
<h3 id="查看机器ip">查看机器IP</h3>
<pre><code class="language-shell">[root@localhost ~]# ifconfig
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://img-blog.csdnimg.cn/20200624164231711.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L00yODM1OTIzMzg=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" loading="lazy"></figure>
<h3 id="修改主机名">修改主机名</h3>
<pre><code class="language-shell">[root@localhost ~]# vi /etc/hostname 
</code></pre>
<figure data-type="image" tabindex="2"><img src="https://img-blog.csdnimg.cn/20200624164355142.png" alt="在这里插入图片描述" loading="lazy"></figure>
<h3 id="修改ip及主机名映射">修改IP及主机名映射</h3>
<pre><code class="language-shell">[root@localhost ~]# vi /etc/hosts
</code></pre>
<figure data-type="image" tabindex="3"><img src="https://img-blog.csdnimg.cn/20200624164559390.png" alt="在这里插入图片描述" loading="lazy"></figure>
<h2 id="ssh免密登陆">SSH免密登陆</h2>
<pre><code class="language-shell">[root@localhost ~]# ssh-keygen -t rsa # 生产密钥
# 连续三次回车


# 将密钥发送给需要登陆本机的机器，这里只有一台机器 所以发给自己
[root@localhost ~]# ssh-copy-id root@CentOS

# 测试ssh
[root@localhost ~]# ssh root@CentOS
</code></pre>
<h1 id="hadoop伪分布式搭建">Hadoop伪分布式搭建</h1>
<ul>
<li>创建 install文件夹</li>
</ul>
<pre><code class="language-shell">[root@localhost ~]# mkdir /opt/install/
</code></pre>
<h2 id="jdk配置">JDK配置</h2>
<p>这里选用JDK8</p>
<h3 id="解压">解压</h3>
<pre><code class="language-shell">[root@localhost ~]# tar -zxvf jdk-8u144-linux-x64.tar.gz -C /opt/install/
</code></pre>
<h3 id="配置环境变量">配置环境变量</h3>
<pre><code class="language-shell">[root@localhost jdk1.8.0_144]# vi /etc/profile
# 加入配置 加入位置如下图所示
export JAVA_HOME=/opt/install/jdk1.8.0_144
export PATH=$PATH:$JAVA_HOME/bin

# 保存后刷新环境变量
[root@localhost jdk1.8.0_144]# source /etc/profile
</code></pre>
<figure data-type="image" tabindex="4"><img src="https://img-blog.csdnimg.cn/20200624170246893.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L00yODM1OTIzMzg=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" loading="lazy"></figure>
<pre><code class="language-shell"># 刷新完 执行命令验证JDK是否安装成功
[root@localhost jdk1.8.0_144]# java -version
</code></pre>
<p>成功界面<br>
<img src="https://img-blog.csdnimg.cn/20200624171407596.png" alt="在这里插入图片描述" loading="lazy"></p>
<h2 id="hadoop配置">Hadoop配置</h2>
<h3 id="解压文件">解压文件</h3>
<pre><code class="language-shell">[root@localhost ~]# tar -zxvf hadoop-2.9.2.tar.gz -C /opt/install/
</code></pre>
<h3 id="修改配置文件">修改配置文件</h3>
<pre><code class="language-shell">[root@localhost ~]# cd /opt/install/hadoop-2.9.2/etc/hadoop
</code></pre>
<ul>
<li>hadoop-env.sh</li>
</ul>
<pre><code class="language-xml">export JAVA_HOME=/opt/install/jdk1.8.0_144
</code></pre>
<figure data-type="image" tabindex="5"><img src="https://img-blog.csdnimg.cn/20200624171838878.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L00yODM1OTIzMzg=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" loading="lazy"></figure>
<ul>
<li>core-site.xml</li>
</ul>
<pre><code class="language-xml">	   &lt;!--  用于设置namenode并且作为Java程序的访问入口  --&gt;
       &lt;property&gt;
            &lt;name&gt;fs.defaultFS&lt;/name&gt;
            &lt;value&gt;hdfs://CentOS:8020&lt;/value&gt;
       &lt;/property&gt;
       &lt;!--  存储NameNode持久化的数据，DataNode块数据  --&gt;
       &lt;!--  手工创建$HADOOP_HOME/data/tmp  --&gt;
       &lt;property&gt;
             &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;
             &lt;value&gt;/opt/install/hadoop-2.9.2/data/tmp&lt;/value&gt;
       &lt;/property&gt;
</code></pre>
<figure data-type="image" tabindex="6"><img src="https://img-blog.csdnimg.cn/2020062417215562.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L00yODM1OTIzMzg=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" loading="lazy"></figure>
<ul>
<li>hdfs-site.xml</li>
</ul>
<pre><code class="language-xml"> &lt;!--  设置副本数量 默认是3 可自行根据需求更改  --&gt;
        &lt;property&gt;		
            &lt;name&gt;dfs.replication&lt;/name&gt;
            &lt;value&gt;3&lt;/value&gt;
        &lt;/property&gt;
&lt;!--  权限，可省略  --&gt;
         &lt;property&gt;
             &lt;name&gt;dfs.permissions.enabled&lt;/name&gt;
             &lt;value&gt;false&lt;/value&gt;
          &lt;/property&gt;
          &lt;property&gt;
              &lt;name&gt;dfs.namenode.http.address&lt;/name&gt;
              &lt;value&gt;CentOS:50070&lt;/value&gt;
           &lt;/property&gt;
</code></pre>
<figure data-type="image" tabindex="7"><img src="https://img-blog.csdnimg.cn/20200624172329411.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L00yODM1OTIzMzg=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" loading="lazy"></figure>
<ul>
<li>mapred-site.xml<br>
首先拷贝一个mapred-site.xml</li>
</ul>
<pre><code class="language-shell">[root@localhost hadoop]# cp mapred-site.xml.template mapred-site.xml
</code></pre>
<pre><code class="language-xml">&lt;!--  yarn 与 MapReduce相关  --&gt;
       &lt;property&gt;	 	        		
            &lt;name&gt;mapreduce.framework.name&lt;/name&gt;
            &lt;value&gt;yarn&lt;/value&gt;
       &lt;/property&gt;
</code></pre>
<figure data-type="image" tabindex="8"><img src="https://img-blog.csdnimg.cn/20200624172533905.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L00yODM1OTIzMzg=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" loading="lazy"></figure>
<ul>
<li>yarn-site.xml</li>
</ul>
<pre><code class="language-xml"> &lt;property&gt;
          &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;
          &lt;value&gt;mapreduce_shuffle&lt;/value&gt;
  &lt;/property&gt;
</code></pre>
<figure data-type="image" tabindex="9"><img src="https://img-blog.csdnimg.cn/20200624172643893.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L00yODM1OTIzMzg=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" loading="lazy"></figure>
<ul>
<li>slaves<br>
这里配置DataNode的<code>主机名</code> <code>伪分布式</code>情况下这里<code>NameNode</code>也充当<code>DataNode</code></li>
</ul>
<pre><code class="language-xml">CentOS
</code></pre>
<figure data-type="image" tabindex="10"><img src="https://img-blog.csdnimg.cn/20200624172811202.png" alt="在这里插入图片描述" loading="lazy"></figure>
<h3 id="配置hadoop环境变量">配置Hadoop环境变量</h3>
<pre><code class="language-shell">[root@localhost hadoop-2.9.2]# vim /etc/profile
# 加入
export HADOOP_HOME=/opt/install/hadoop-2.9.2
export PATH=$PATH:$JAVA_HOME/bin:$HADOOP_HOME/bin:$HADOOP_HOME/sbin
</code></pre>
<figure data-type="image" tabindex="11"><img src="https://img-blog.csdnimg.cn/20200624173026102.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L00yODM1OTIzMzg=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" loading="lazy"></figure>
<pre><code class="language-shell"># 刷新环境变量
[root@localhost hadoop-2.9.2]# source /etc/profile
</code></pre>
<h3 id="验证环境变量是否配置成功">验证环境变量是否配置成功</h3>
<pre><code class="language-shell">[root@localhost hadoop-2.9.2]# hadoop version
</code></pre>
<figure data-type="image" tabindex="12"><img src="https://img-blog.csdnimg.cn/20200624173219432.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L00yODM1OTIzMzg=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" loading="lazy"></figure>
<h3 id="格式化namenode">格式化NameNode</h3>
<p>目的作用：格式化hdfs系统，并且生成存储数据块的目录</p>
<pre><code class="language-shell">[root@localhost hadoop-2.9.2]# hadoop namenode -format 
</code></pre>
<p>格式化成功后如图显示<br>
<img src="https://img-blog.csdnimg.cn/20200624173431762.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L00yODM1OTIzMzg=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" loading="lazy"></p>
<h3 id="hadoop起停命令">Hadoop起停命令</h3>
<pre><code class="language-shell">   start-all.sh
   stop-all.sh
</code></pre>
<p>启动成后 <code>jps</code>查看进程<br>
<img src="https://img-blog.csdnimg.cn/20200624173640904.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L00yODM1OTIzMzg=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" loading="lazy"></p>
<h3 id="查看webui界面">查看WebUI界面</h3>
<p>http://CentOS:50070 访问 hdfs<br>
http://CentOS:8088 访问 yarn<br>
<img src="https://img-blog.csdnimg.cn/20200624174037209.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L00yODM1OTIzMzg=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" loading="lazy"><br>
<img src="https://img-blog.csdnimg.cn/20200624174138121.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L00yODM1OTIzMzg=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述" loading="lazy"></p>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://mask0407.github.io/mWPQYQko7/" class="tag">
                    Hadoop
                  </a>
                
                  <a href="https://mask0407.github.io/1ffDVERZml/" class="tag">
                    大数据
                  </a>
                
              </div>
            
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.min.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>






  </body>
</html>
